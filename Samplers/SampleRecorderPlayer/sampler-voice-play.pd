#N canvas 4 50 852 938 10;
#X obj 162 727 line~;
#X msg 204 622 0 0;
#X obj 94 644 pack 0 0;
#X floatatom 127 508 5 0 0 0 - - -, f 5;
#X floatatom 135 441 5 0 0 0 - - -, f 5;
#X obj 81 464 f;
#X obj 67 516 * 44.1;
#X obj 163 754 tabread4~ \$1-array;
#X obj 126 477 r \$1-duration;
#X obj 135 416 r \$1-duration;
#X obj 128 149 stripnote;
#X obj 194 274 sel \$2;
#X obj 128 220 % 24;
#X obj 163 877 throw~ samp_voice_out;
#X obj 167 542 f;
#X obj 255 490 t b f;
#X obj 128 194 abs;
#X text 293 36 argument 1: soundfile to load;
#X text 294 57 argument 2: key number to play;
#X obj 128 171 expr if ($f1 > 59 \, $f1 - 60 \, $f1 - 12);
#X text 190 221 allow all midi notes to trigger samples...;
#X obj 152 366 t b b b;
#X obj 332 722 vline~;
#X obj 327 752 *~;
#X obj 332 629 f 1000;
#X obj 410 522 r \$1-duration;
#X obj 392 579 *;
#X obj 372 508 *;
#X obj 372 486 t f f;
#X obj 162 798 *~;
#X obj 332 657 pack 0 0;
#X msg 332 686 1 1 \, \$2 \$1 1;
#X obj 372 422 t f f;
#X text 442 443 if knob all the way up \, never decay;
#X text 489 390 do a simple amplitude decay;
#X obj 441 471 expr if($f1 > 0.98 \, 1 \, 0);
#X obj 163 832 hip~ 5;
#X text 243 834 cut DC;
#X obj 410 547 * 2;
#X obj 164 332 spigot 1;
#X obj 279 634 bang;
#X msg 279 672 0 1;
#X text 481 654 set state = recording;
#X text 480 677 then after 1 second set state = finishing;
#X text 484 701 then after 250 ms sate = done;
#X obj 377 603 + 10;
#X obj 247 580 spigot 0;
#X obj 274 530 r mono-poly;
#X text 340 360 scale playback speed;
#X obj 292 371 / 100;
#X obj 292 393 mtof;
#X obj 292 415 / 8.1785;
#X obj 157 591 / 1;
#X obj 292 346 * 2400;
#X obj 276 454 / 2;
#X obj 111 115 r sample-play;
#X obj 372 392 r sample-decay;
#X obj 292 321 r samp-speed;
#X connect 0 0 7 0;
#X connect 1 0 0 0;
#X connect 2 0 0 0;
#X connect 3 0 14 0;
#X connect 4 0 5 1;
#X connect 5 0 6 0;
#X connect 6 0 2 0;
#X connect 7 0 29 0;
#X connect 8 0 3 0;
#X connect 9 0 4 0;
#X connect 10 0 19 0;
#X connect 11 0 39 0;
#X connect 11 1 46 0;
#X connect 12 0 11 0;
#X connect 14 0 52 0;
#X connect 15 0 14 0;
#X connect 15 1 52 1;
#X connect 16 0 12 0;
#X connect 19 0 16 0;
#X connect 21 0 5 0;
#X connect 21 1 1 0;
#X connect 21 2 24 0;
#X connect 22 0 23 1;
#X connect 22 0 23 0;
#X connect 23 0 29 1;
#X connect 24 0 30 0;
#X connect 25 0 38 0;
#X connect 26 0 45 0;
#X connect 27 0 26 0;
#X connect 28 0 27 0;
#X connect 28 1 27 1;
#X connect 29 0 36 0;
#X connect 30 0 31 0;
#X connect 31 0 22 0;
#X connect 32 0 28 0;
#X connect 32 1 35 0;
#X connect 35 0 30 1;
#X connect 36 0 13 0;
#X connect 38 0 26 1;
#X connect 39 0 21 0;
#X connect 40 0 41 0;
#X connect 41 0 22 0;
#X connect 45 0 24 1;
#X connect 46 0 40 0;
#X connect 49 0 50 0;
#X connect 50 0 51 0;
#X connect 51 0 54 0;
#X connect 52 0 2 1;
#X connect 53 0 49 0;
#X connect 54 0 15 0;
#X connect 55 0 10 0;
#X connect 56 0 32 0;
#X connect 57 0 53 0;
